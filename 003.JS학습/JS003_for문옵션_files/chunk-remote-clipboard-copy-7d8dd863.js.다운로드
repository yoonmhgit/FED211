System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-copy.js"],(function(t){"use strict";var e,i,s,r,n,o;return{setters:[function(t){e=t._,i=t.j,s=t.t,r=t.c},function(t){n=t.W},function(t){o=t.c}],execute:function(){const a=["idle","fetching","success","error"],c=["success","error"];let h=t("RemoteClipboardCopyElement",class RemoteClipboardCopyElement extends HTMLElement{constructor(){super(...arguments),this.src="",this.stateTimeout=2e3,this.transientStateTimer=null,this._state="idle"}connectedCallback(){this.render()}get state(){return this._state}set state(t){a.includes(t)&&(this._state=t,this.render(),this.transientStateTimer&&(window.clearTimeout(this.transientStateTimer),this.transientStateTimer=null),c.includes(t)&&(this.transientStateTimer=window.setTimeout((()=>{this.state="idle"}),this.stateTimeout)))}asyncClipboardSupported(){const t="clipboard"in navigator,e="undefined"!=typeof ClipboardItem;return t&&e}async remoteCopy(){if(""===this.src)return;if("idle"!==this.state)return;const t=this.fetchContentWithState();try{await this.asyncClipboard(t)}catch(e){try{await this.awaitThenCopy(t)}catch(i){throw this.state="error",i}}}async asyncClipboard(t){if(!this.asyncClipboardSupported())throw new Error("Async clipboard API is not supported");const e=new ClipboardItem({"text/plain":t});await navigator.clipboard.write([e]),this.state="success"}async awaitThenCopy(t){const e=await t;await o(await e.text()),this.state="success"}async fetchContent(){await n();const t=await fetch(this.src,{method:"GET",redirect:"follow"});if(!t.ok)throw new Error("Fetching content failed");let e=await t.text();return e=e.replace(/\r?\n$/,""),new Blob([e],{type:"text/plain"})}async fetchContentWithState(){this.state="fetching";try{return await this.fetchContent()}catch(t){throw this.state="error",t}}render(){this.idle&&(this.idle.hidden="idle"!==this.state),this.fetching&&(this.fetching.hidden="fetching"!==this.state),this.success&&(this.success.hidden="success"!==this.state),this.error&&(this.error.hidden="error"!==this.state)}});e([i],h.prototype,"src",void 0),e([i],h.prototype,"stateTimeout",void 0),e([s],h.prototype,"idle",void 0),e([s],h.prototype,"fetching",void 0),e([s],h.prototype,"success",void 0),e([s],h.prototype,"error",void 0),h=t("RemoteClipboardCopyElement",e([r],h))}}}));
//# sourceMappingURL=chunk-remote-clipboard-copy-793c2711.js.map
